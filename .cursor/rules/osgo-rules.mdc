================================================================================
                    REGLAS Y ACLARACIONES PARA EL DESARROLLO DE OSGO
                    Sistema de GestiÃ³n Operativa - Arquitectura Dual
================================================================================

FECHA DE CREACIÃ“N: 2025-01-27
VERSIÃ“N: 2.0 - ARQUITECTURA DUAL
PROPÃ“SITO: Documentar todas las reglas, restricciones y aclaraciones que deben
          seguirse durante el desarrollo del sistema OSGO con arquitectura dual
          de bases de datos.

ARQUITECTURA: Base de datos dual (osgo + sistema_principal)

================================================================================
1. ARQUITECTURA DUAL DE BASES DE DATOS
================================================================================

1.1 CONCEPTO FUNDAMENTAL
------------------------
El sistema OSGO opera con DOS bases de datos separadas e independientes:

ðŸ—„ï¸ **BASE DE DATOS OSGO** (osgo.sql)
- PROPÃ“SITO: Almacenamiento principal del sistema OSGO
- OPERACIONES: CREATE, READ, UPDATE, DELETE
- CONEXIÃ“N: 'osgo' (por defecto)
- RESPONSABILIDAD: Todos los datos operativos del sistema

ðŸ“Š **BASE DE DATOS SISTEMA_PRINCIPAL** (sistema_principal.sql)
- PROPÃ“SITO: Fuente de datos de referencia
- OPERACIONES: SOLO READ (consulta Ãºnicamente)
- CONEXIÃ“N: 'sistema_principal'
- RESPONSABILIDAD: Datos maestros del sistema principal

1.2 SEPARACIÃ“N DE RESPONSABILIDADES
-----------------------------------

**ALMACENAMIENTO (BD osgo)**:
âœ… Todas las tablas con prefijo "osgo_"
âœ… Ã“rdenes de servicio y sus detalles
âœ… Control de horas OSGO
âœ… Anexos de eventos y operaciones
âœ… Recursos operativos OSGO
âœ… Usuarios y roles del sistema OSGO
âœ… Configuraciones especÃ­ficas del sistema

**CONSULTA (BD sistema_principal)**:
âœ… Datos de personal (personas)
âœ… Funciones organizacionales
âœ… Grupos operativos
âœ… Indisponibilidades de personal
âœ… Estructura de distritos
âœ… Sistemas de la organizaciÃ³n

================================================================================
2. RESTRICCIONES DE BASE DE DATOS - ARQUITECTURA DUAL
================================================================================

2.1 RESTRICCIONES BD OSGO (Almacenamiento)
-------------------------------------------

TABLAS PERMITIDAS:
âœ… CREAR nuevas tablas con prefijo "osgo_"
âœ… MODIFICAR tablas existentes con prefijo "osgo_"
âœ… ELIMINAR tablas con prefijo "osgo_" (con precauciÃ³n)
âœ… Modificar campos de tablas "osgo_"
âœ… Agregar nuevos campos a tablas "osgo_"
âœ… Eliminar campos de tablas "osgo_" (con precauciÃ³n)

TABLAS LARAVEL (permitidas):
âœ… migrations, sessions, cache, jobs, etc.
âœ… Operaciones normales de Laravel

âŒ PROHIBIDO:
âŒ NO crear tablas sin prefijo "osgo_" (excepto Laravel)
âŒ NO duplicar datos del sistema principal

2.2 RESTRICCIONES BD SISTEMA_PRINCIPAL (Solo consulta)
-------------------------------------------------------

âœ… PERMITIDO:
âœ… SELECT en todas las tablas
âœ… Consultas JOIN entre tablas
âœ… Funciones de agregaciÃ³n (COUNT, SUM, etc.)
âœ… Consultas con filtros y ordenamientos

âŒ ESTRICTAMENTE PROHIBIDO:
âŒ INSERT - No insertar datos
âŒ UPDATE - No actualizar datos
âŒ DELETE - No eliminar datos
âŒ ALTER TABLE - No modificar estructura
âŒ DROP TABLE - No eliminar tablas
âŒ CREATE TABLE - No crear tablas
âŒ Cualquier operaciÃ³n de escritura

2.3 MANEJO DE REFERENCIAS CRUZADAS
-----------------------------------

REFERENCIAS VÃLIDAS:
âœ… osgo.osgo_detalle_orden_servicio.ID_FUNCION â†’ sistema_principal.funciones.ID_FUNCION
âœ… osgo.osgo_control_horas.ID_PERSONA â†’ sistema_principal.personas.ID_PERSONA
âœ… Cualquier referencia lÃ³gica entre las BD

IMPLEMENTACIÃ“N:
âœ… Validar integridad en cÃ³digo PHP/Laravel
âœ… NO usar FOREIGN KEY cross-database
âœ… Usar validaciones en modelos Eloquent
âœ… Implementar cache para optimizaciÃ³n

================================================================================
3. LÃ“GICA DE MAESTRO-DETALLE - ARQUITECTURA DUAL
================================================================================

3.1 PRINCIPIOS FUNDAMENTALES ACTUALIZADOS
------------------------------------------
- Respetar relaciones de integridad referencial DENTRO de cada BD
- Validar integridad referencial ENTRE BD mediante cÃ³digo
- Las tablas maestras pueden estar en cualquiera de las dos BD
- Mantener consistencia en referencias cruzadas
- Implementar fallbacks cuando sistema_principal no estÃ© disponible

3.2 ESTRUCTURA DE Ã“RDENES DE SERVICIO (ACTUALIZADA)
----------------------------------------------------

MAESTRO: osgo.osgo_orden_servicio (BD osgo)
â”œâ”€â”€ ID_ORDEN_SERVICIO (PK)
â”œâ”€â”€ NRO_ORDEN (Ãºnico)
â”œâ”€â”€ FECHA, DIA_SEMANA, FECHA_COMPLETA
â”œâ”€â”€ DISTRITO, PROVINCIA, CIUDAD
â”œâ”€â”€ TIPO_ORDEN, OPERACIONES, REVISION
â”œâ”€â”€ ID_ESTADO_ORDEN (FK â†’ osgo.osgo_estado_orden)
â”œâ”€â”€ DISPOSICIONES_GENERALES, FORMATO
â””â”€â”€ Campos adicionales para parametrizaciÃ³n

DETALLE: osgo.osgo_detalle_orden_servicio (BD osgo)
â”œâ”€â”€ ID_DET_ORDEN_SERVICIO (PK)
â”œâ”€â”€ ID_ORDEN_SERVICIO (FK â†’ osgo.osgo_orden_servicio)
â”œâ”€â”€ ID_FUNCION (REF â†’ sistema_principal.funciones) - validaciÃ³n por cÃ³digo
â”œâ”€â”€ GRUPO_FUNCIONAL, FUNCION
â”œâ”€â”€ RESPONSABLE, SECTOR
â”œâ”€â”€ HORARIO, TIPO_SERVICIO, PLACA_VEHICULO
â”œâ”€â”€ GRUPO_ASIGNADO, CIRCUITO, DESCRIPCION_RUTA
â”œâ”€â”€ TIPO_VEHICULO, REQUIERE_ACOMPANANTE, ACOMPANANTE
â””â”€â”€ Campos especÃ­ficos del detalle

3.3 RELACIONES CRÃTICAS ACTUALIZADAS
-------------------------------------

INTERNAS (Misma BD):
âœ… osgo.osgo_orden_servicio.ID_ESTADO_ORDEN â†’ osgo.osgo_estado_orden.ID_ESTADO_ORDEN
âœ… osgo.osgo_detalle_orden_servicio.ID_ORDEN_SERVICIO â†’ osgo.osgo_orden_servicio.ID_ORDEN_SERVICIO
âœ… osgo.osgo_users.ROL_ID â†’ osgo.osgo_roles.ID

CROSS-DATABASE (ValidaciÃ³n por cÃ³digo):
âš ï¸ osgo.osgo_detalle_orden_servicio.ID_FUNCION â†’ sistema_principal.funciones.ID_FUNCION
âš ï¸ osgo.osgo_control_horas.ID_PERSONA â†’ sistema_principal.personas.ID_PERSONA

================================================================================
4. PARAMETRIZACIÃ“N DE DATOS - ARQUITECTURA DUAL
================================================================================

4.1 PRINCIPIO FUNDAMENTAL ACTUALIZADO
--------------------------------------
"Menos libertad al usuario = mejor parametrizaciÃ³n"
"Usar datos de referencia del sistema principal cuando sea posible"

- Los usuarios NO deben tener campos de texto libre
- PRIORIZAR datos del sistema principal para parametrizaciÃ³n
- Usar dropdowns poblados desde sistema_principal cuando corresponda
- Cachear datos de referencia para mejor rendimiento

4.2 CAMPOS PARAMETRIZADOS DESDE SISTEMA_PRINCIPAL
--------------------------------------------------
âœ… FUNCIONES: Seleccionar de sistema_principal.funciones.FUNCION
âœ… PERSONAL: Seleccionar de sistema_principal.personas (NOMBRES + APELLIDOS)
âœ… GRUPOS_OPERATIVOS: Seleccionar de sistema_principal.grupo_operativo.NOMBRE_GRUPO
âœ… DISTRITOS: Seleccionar de sistema_principal.distritos_agentes.DISTRITO

4.3 CAMPOS PARAMETRIZADOS DESDE BD OSGO
----------------------------------------
âœ… SECTORES: Seleccionar de osgo.osgo_sectores.SECTOR
âœ… HORARIOS: Seleccionar de osgo.osgo_horarios.NOMBRE
âœ… TIPO_VEHICULO: Seleccionar de osgo.osgo_tipo_vehiculo.TIPO_VEHICULO
âœ… ESTADOS_ORDEN: Seleccionar de osgo.osgo_estado_orden.ESTADO_ORDEN
âœ… RECURSOS: Seleccionar de osgo.osgo_recursos.NOMBRE_RECURSO

4.4 VALORES FIJOS (Sin BD)
---------------------------
âœ… PROVINCIA: Valores fijos (IMBABURA, etc.)
âœ… CIUDAD: Valores fijos (IBARRA, etc.)
âœ… TIPO_ORDEN: Valores fijos (GENERAL, ESPECIAL)
âœ… OPERACIONES: Valores fijos (P3, P4, etc.)
âœ… GRUPO_FUNCIONAL: Valores fijos (GERENCIA, PATRULLEROS, MOTORIZADO, PEDESTRE)
âœ… TIPO_SERVICIO: Valores fijos (MOTORIZADO, PEDESTRE, ADMINISTRATIVO)

4.5 CAMPOS DE TEXTO LIBRE (MÃNIMOS)
------------------------------------
âš ï¸ NOVEDADES: DescripciÃ³n especÃ­fica del servicio
âš ï¸ OBSERVACION: Observaciones adicionales
âš ï¸ DESCRIPCION_RUTA: DescripciÃ³n detallada de la ruta
âš ï¸ INSTRUCCIONES_ESPECIALES: Instrucciones especÃ­ficas

================================================================================
5. CONFIGURACIÃ“N DE CONEXIONES
================================================================================

5.1 CONFIGURACIÃ“N OBLIGATORIA EN config/database.php
-----------------------------------------------------

'default' => env('DB_CONNECTION', 'osgo'),

'connections' => [
    'osgo' => [
        'driver' => 'mysql',
        'host' => env('OSGO_DB_HOST', '127.0.0.1'),
        'port' => env('OSGO_DB_PORT', '3306'),
        'database' => env('OSGO_DB_DATABASE', 'osgo'),
        'username' => env('OSGO_DB_USERNAME', 'root'),
        'password' => env('OSGO_DB_PASSWORD', ''),
        'charset' => 'utf8mb4',
        'collation' => 'utf8mb4_unicode_ci',
        'prefix' => '',
        'strict' => true,
        'engine' => null,
    ],
    
    'sistema_principal' => [
        'driver' => 'mysql',
        'host' => env('SISTEMA_PRINCIPAL_DB_HOST', '127.0.0.1'),
        'port' => env('SISTEMA_PRINCIPAL_DB_PORT', '3306'),
        'database' => env('SISTEMA_PRINCIPAL_DB_DATABASE', 'sistema_principal'),
        'username' => env('SISTEMA_PRINCIPAL_DB_USERNAME', 'root'),
        'password' => env('SISTEMA_PRINCIPAL_DB_PASSWORD', ''),
        'charset' => 'utf8mb4',
        'collation' => 'utf8mb4_unicode_ci',
        'prefix' => '',
        'strict' => true,
        'engine' => null,
    ],
]

5.2 CONFIGURACIÃ“N OBLIGATORIA EN .env
--------------------------------------

# Base de datos OSGO (Principal)
DB_CONNECTION=osgo
OSGO_DB_HOST=127.0.0.1
OSGO_DB_PORT=3306
OSGO_DB_DATABASE=osgo
OSGO_DB_USERNAME=root
OSGO_DB_PASSWORD=

# Base de datos Sistema Principal (Solo consulta)
SISTEMA_PRINCIPAL_DB_HOST=127.0.0.1
SISTEMA_PRINCIPAL_DB_PORT=3306
SISTEMA_PRINCIPAL_DB_DATABASE=sistema_principal
SISTEMA_PRINCIPAL_DB_USERNAME=root
SISTEMA_PRINCIPAL_DB_PASSWORD=

================================================================================
6. RESTRICCIONES DE DESARROLLO - ARQUITECTURA DUAL
================================================================================

6.1 MODELOS ELOQUENT
--------------------

MODELOS BD OSGO:
âœ… DEBEN especificar: protected $connection = 'osgo';
âœ… PUEDEN usar: timestamps, softDeletes, fillable, etc.
âœ… PUEDEN tener: relaciones, mutators, accessors

class OrdenServicio extends Model
{
    protected $connection = 'osgo';
    protected $table = 'osgo_orden_servicio';
    protected $primaryKey = 'ID_ORDEN_SERVICIO';
    
    // Operaciones completas permitidas
}

MODELOS BD SISTEMA_PRINCIPAL:
âœ… DEBEN especificar: protected $connection = 'sistema_principal';
âŒ NO usar timestamps (public $timestamps = false;)
âŒ NO usar fillable/guarded para escritura
âŒ SOLO mÃ©todos de consulta

class Persona extends Model
{
    protected $connection = 'sistema_principal';
    protected $table = 'personas';
    protected $primaryKey = 'ID_PERSONA';
    public $timestamps = false;
    
    // SOLO operaciones de lectura
}

6.2 MIGRACIONES
---------------

BD OSGO:
âœ… Crear migraciones normalmente para tablas osgo_*
âœ… Usar connection 'osgo' si es necesario
âœ… php artisan migrate --database=osgo

BD SISTEMA_PRINCIPAL:
âŒ NO crear migraciones
âŒ NO modificar estructura
âŒ La estructura estÃ¡ fija en sistema_principal.sql

6.3 SEEDERS
-----------

BD OSGO:
âœ… Crear seeders para tablas osgo_*
âœ… Poblar datos de configuraciÃ³n del sistema

class OsgoSeeder extends Seeder
{
    public function run()
    {
        DB::connection('osgo')->table('osgo_estado_orden')->insert([...]);
    }
}

BD SISTEMA_PRINCIPAL:
âŒ NO crear seeders
âŒ Los datos estÃ¡n fijos en el sistema principal

6.4 VALIDACIONES CROSS-DATABASE
--------------------------------

OBLIGATORIO en modelos OSGO que referencien sistema_principal:

class DetalleOrdenServicio extends Model
{
    protected $connection = 'osgo';
    
    // Validar que ID_FUNCION existe en sistema_principal
    public function validarFuncion()
    {
        if ($this->ID_FUNCION) {
            return \App\Models\Funcione::find($this->ID_FUNCION) !== null;
        }
        return true;
    }
}

IMPLEMENTAR en Form Requests:

public function rules()
{
    return [
        'ID_FUNCION' => [
            'required',
            function ($attribute, $value, $fail) {
                if (!\App\Models\Funcione::find($value)) {
                    $fail('La funciÃ³n seleccionada no existe.');
                }
            },
        ],
    ];
}

================================================================================
7. ESTRUCTURA DE DATOS DE EJEMPLO - ARQUITECTURA DUAL
================================================================================

7.1 DATOS EN BD OSGO
---------------------

osgo_orden_servicio:
- NRO_ORDEN: Secuencial (274, 273, 272, 271...)
- FECHA: Formato YYYY-MM-DD
- DIA_SEMANA: Valores fijos (MIÃ‰RCOLES, JUEVES, VIERNES, SÃBADO...)
- FECHA_COMPLETA: Formato legible (2 DE ABRIL DE 2025)
- TIPO_ORDEN: GENERAL (por defecto)
- OPERACIONES: P3 (por defecto)
- REVISION: 00 (por defecto)
- FORMATO: "11 julio 2022" (fijo)

osgo_recursos:
- PATRULLEROS: T1 IMA1300, T2 IMA1506, T3 IMA1383
- GRÃšAS: IMA-1289
- MOTORIZADOS: GA611K, GA616K
- Cada recurso tiene: PLACA, TIPO_VEHICULO, GRUPO_ASIGNADO, HORARIO_DISPONIBILIDAD

osgo_horarios:
- TURNO MAÃ‘ANA: 06:00-14:00 (8 horas)
- TURNO TARDE: 14:00-22:00 (8 horas)
- TURNO NOCHE: 22:00-06:00 (8 horas)
- TURNO ESPECIAL: 12:00-20:00 (8 horas)
- TURNO ADMINISTRATIVO: 08:00-17:00 (9 horas)

7.2 DATOS EN BD SISTEMA_PRINCIPAL (Solo consulta)
--------------------------------------------------

personas:
- Personal disponible con NOMBRES, APELLIDOS, CODIGO_AGENTE
- Usado para parametrizar responsables en Ã³rdenes

funciones:
- Funciones organizacionales disponibles
- Usado para asignar funciones especÃ­ficas al personal

grupo_operativo:
- Grupos operativos de la organizaciÃ³n
- Usado para estructurar asignaciones

================================================================================
8. CONVENCIONES DE NOMENCLATURA - ARQUITECTURA DUAL
================================================================================

8.1 TABLAS BD OSGO
------------------
- Prefijo obligatorio: "osgo_"
- Nombres en minÃºsculas con guiones bajos
- Ejemplos: osgo_orden_servicio, osgo_detalle_orden_servicio

8.2 TABLAS BD SISTEMA_PRINCIPAL
-------------------------------
- SIN prefijo (provienen del sistema principal)
- Nombres tal como estÃ¡n en el sistema original
- Ejemplos: personas, funciones, grupo_operativo

8.3 CAMPOS BD OSGO
------------------
- Nombres en MAYÃšSCULAS para campos principales
- Nombres en camelCase para campos adicionales
- created_at, updated_at para timestamps Laravel
- Ejemplos: ID_ORDEN_SERVICIO, NRO_ORDEN, created_at

8.4 CAMPOS BD SISTEMA_PRINCIPAL
-------------------------------
- Mantener nombres originales del sistema principal
- No modificar nomenclatura existente
- Ejemplos: ID_PERSONA, NOMBRES, APELLIDOS, CODIGO_AGENTE

8.5 VALORES
-----------
- Valores fijos en MAYÃšSCULAS
- Ejemplos: "GENERAL", "MOTORIZADO", "PATRULLERO"

================================================================================
9. CACHE Y OPTIMIZACIÃ“N - ARQUITECTURA DUAL
================================================================================

9.1 CACHE OBLIGATORIO PARA DATOS SISTEMA_PRINCIPAL
---------------------------------------------------

// Cache datos de referencia frecuentemente usados
$funciones = cache()->remember('funciones_sistema_principal', 3600, function() {
    return \App\Models\Funcione::all()->pluck('FUNCION', 'ID_FUNCION');
});

$personas = cache()->remember('personas_activas_sistema_principal', 1800, function() {
    return \App\Models\Persona::where('ACTIVO', 1)
        ->orderBy('APELLIDOS')
        ->orderBy('NOMBRES')
        ->get();
});

9.2 ESTRATEGIAS DE CACHE
------------------------

DATOS DE REFERENCIA (sistema_principal):
âœ… Cache largo (1-4 horas)
âœ… Invalidar solo si detectas cambios
âœ… Cache por categorÃ­as (funciones, personas, grupos)

DATOS OPERATIVOS (osgo):
âœ… Cache corto (5-30 minutos)
âœ… Invalidar en cada cambio
âœ… Cache selectivo por usuario/contexto

9.3 MANEJO DE ERRORES DE CONEXIÃ“N
----------------------------------

try {
    $personas = \App\Models\Persona::all();
} catch (\Exception $e) {
    // Usar cache como fallback
    $personas = cache()->get('personas_fallback', collect());
    
    // Log del error
    \Log::error('Error conectando a sistema_principal: ' . $e->getMessage());
}

================================================================================
10. CONSIDERACIONES DE SEGURIDAD - ARQUITECTURA DUAL
================================================================================

10.1 PERMISOS DE BASE DE DATOS
------------------------------

BD OSGO:
âœ… Usuario con permisos completos: SELECT, INSERT, UPDATE, DELETE
âœ… Restricciones por rol de usuario en la aplicaciÃ³n
âœ… Control de acceso granular por funcionalidad

BD SISTEMA_PRINCIPAL:
âœ… Usuario con SOLO permisos de SELECT
âŒ Sin permisos de escritura (INSERT, UPDATE, DELETE)
âœ… Solo lectura garantizada a nivel de BD

10.2 VALIDACIONES DE INTEGRIDAD
-------------------------------

OBLIGATORIO:
âœ… Validar existencia de registros en sistema_principal antes de guardar
âœ… Manejo graceful de errores de conexiÃ³n
âœ… Validaciones both-side (cliente y servidor)
âœ… Logs de operaciones cross-database

class FormRequest extends Request
{
    public function rules()
    {
        return [
            'responsable_id' => [
                'required',
                function ($attribute, $value, $fail) {
                    try {
                        if (!\App\Models\Persona::find($value)) {
                            $fail('El responsable seleccionado no existe.');
                        }
                    } catch (\Exception $e) {
                        $fail('Error validando el responsable.');
                    }
                },
            ],
        ];
    }
}

10.3 AUDITORÃA
--------------

BD OSGO:
âœ… Registrar quiÃ©n creÃ³/modificÃ³ cada registro
âœ… Mantener historial de cambios con timestamps
âœ… Logs de operaciones importantes

BD SISTEMA_PRINCIPAL:
âœ… Solo logs de consultas si es necesario
âœ… Monitoreo de disponibilidad
âœ… Alertas de desconexiÃ³n

================================================================================
11. TESTING - ARQUITECTURA DUAL
================================================================================

11.1 TESTS PARA BD OSGO
-----------------------

âœ… Unit tests para modelos osgo
âœ… Feature tests para funcionalidades completas
âœ… Tests de integridad referencial interna
âœ… Tests de validaciones

class OrdenServicioTest extends TestCase
{
    public function test_crear_orden_servicio()
    {
        $orden = OrdenServicio::create([
            'NRO_ORDEN' => 275,
            'FECHA' => '2025-01-27',
            // ...
        ]);
        
        $this->assertDatabaseHas('osgo_orden_servicio', [
            'ID_ORDEN_SERVICIO' => $orden->ID_ORDEN_SERVICIO
        ]);
    }
}

11.2 TESTS PARA INTEGRIDAD CROSS-DATABASE
------------------------------------------

âœ… Tests que validen referencias a sistema_principal
âœ… Tests de fallback cuando sistema_principal no estÃ¡ disponible
âœ… Tests de cache de datos de referencia

class CrossDatabaseTest extends TestCase
{
    public function test_validar_funcion_existe()
    {
        // Mock sistema_principal no disponible
        Config::set('database.connections.sistema_principal.host', 'localhost_fake');
        
        $this->expectException(\Exception::class);
        
        DetalleOrdenServicio::create([
            'ID_FUNCION' => 999999, // No existe
            // ...
        ]);
    }
}

================================================================================
12. MIGRACIÃ“N DE DATOS (Si es necesario)
================================================================================

12.1 MIGRACIÃ“N DESDE ARQUITECTURA ÃšNICA
----------------------------------------

Si hay datos existentes en arquitectura Ãºnica:

1. **Backup completo** de la BD original
2. **Crear BD osgo** nueva
3. **Migrar solo tablas osgo_*** a la nueva BD
4. **Configurar conexiÃ³n** sistema_principal
5. **Actualizar modelos** con connections correctas
6. **Validar integridad** cross-database
7. **Testing completo** antes de producciÃ³n

12.2 SCRIPT DE MIGRACIÃ“N EJEMPLO
---------------------------------

-- Exportar tablas osgo_ de BD original
mysqldump original_db osgo_orden_servicio osgo_detalle_orden_servicio [...] > osgo_tables.sql

-- Importar a nueva BD osgo
mysql osgo < osgo_tables.sql

-- Configurar conexiones en Laravel
-- Actualizar modelos
-- Testing

================================================================================
13. MONITOREO Y ALERTAS - ARQUITECTURA DUAL
================================================================================

13.1 MONITOREO BD OSGO
----------------------

âœ… Espacio en disco y crecimiento
âœ… Rendimiento de consultas
âœ… Integridad referencial
âœ… Backup automÃ¡tico y verificaciÃ³n
âœ… Logs de errores y excepciones

13.2 MONITOREO BD SISTEMA_PRINCIPAL
-----------------------------------

âœ… Disponibilidad de conexiÃ³n
âœ… Tiempo de respuesta de consultas
âœ… Alertas de desconexiÃ³n
âœ… ValidaciÃ³n de datos de referencia

13.3 ALERTAS CRÃTICAS
---------------------

ðŸš¨ BD osgo no disponible â†’ CRÃTICO
ðŸš¨ BD sistema_principal no disponible â†’ ADVERTENCIA
ðŸš¨ Inconsistencias de datos â†’ IMPORTANTE
ðŸš¨ Fallos de backup â†’ CRÃTICO

================================================================================
14. VENTAJAS Y CONSIDERACIONES FINALES
================================================================================

14.1 VENTAJAS DE LA ARQUITECTURA DUAL
--------------------------------------

âœ… **INDEPENDENCIA**: Sistema OSGO opera independientemente
âœ… **SEGURIDAD**: Solo lectura en sistema principal
âœ… **ESCALABILIDAD**: Cada BD se optimiza por separado
âœ… **MANTENIMIENTO**: Backup y actualizaciones independientes
âœ… **INTEGRIDAD**: Sistema principal intacto y protegido
âœ… **FLEXIBILIDAD**: FÃ¡cil integraciÃ³n con otros sistemas

14.2 CONSIDERACIONES IMPORTANTES
--------------------------------

âš ï¸ **Latencia**: Consultas cross-database pueden ser mÃ¡s lentas
âš ï¸ **Complejidad**: Manejo de dos conexiones requiere mÃ¡s cuidado
âš ï¸ **Dependencias**: Validar disponibilidad de sistema_principal
âš ï¸ **SincronizaciÃ³n**: Datos de referencia pueden cambiar
âš ï¸ **Testing**: MÃ¡s complejo por la doble BD

14.3 MEJORES PRÃCTICAS
----------------------

âœ… Usar cache agresivamente para datos de sistema_principal
âœ… Implementar fallbacks para cuando sistema_principal no estÃ© disponible
âœ… Validar integridad referencial en el cÃ³digo
âœ… Monitorear ambas conexiones constantemente
âœ… Documentar todas las referencias cross-database
âœ… Hacer backup independiente de cada BD

================================================================================
FIN DEL DOCUMENTO - REGLAS ARQUITECTURA DUAL
================================================================================

Este documento debe ser consultado en cada fase del desarrollo para asegurar
el cumplimiento de las reglas establecidas y mantener la consistencia del
sistema OSGO con arquitectura dual de bases de datos.

RECORDATORIO: El sistema OSGO maneja DOS bases de datos:
- osgo (almacenamiento) - READ/WRITE
- sistema_principal (consulta) - SOLO READ

Siempre validar las conexiones y manejar errores apropiadamente.