================================================================================
                    DOCUMENTACI√ìN DE LA BASE DE DATOS OSGO
                    Sistema de Gesti√≥n Operativa - Arquitectura Dual
================================================================================

FECHA DE AN√ÅLISIS: 2025-01-27 (ACTUALIZADA)
VERSI√ìN DEL SISTEMA: 2.0 - ARQUITECTURA DUAL
ARQUITECTURA: Dual Database (Almacenamiento + Consulta)

================================================================================
1. RESUMEN EJECUTIVO - NUEVA ARQUITECTURA
================================================================================

El sistema OSGO ahora opera con una ARQUITECTURA DUAL de bases de datos:

üóÑÔ∏è **BASE DE DATOS OSGO** (Almacenamiento Principal)
- Archivo: osgo.sql
- Prop√≥sito: Almacenamiento de todos los datos del sistema OSGO
- Tablas: 17 tablas con prefijo "osgo_" + tablas de soporte Laravel
- Operaciones: CREATE, UPDATE, DELETE de datos operativos

üìä **BASE DE DATOS SISTEMA_PRINCIPAL** (Consulta de Datos)
- Archivo: sistema_principal.sql
- Prop√≥sito: Obtenci√≥n de datos de referencia (solo lectura)
- Tablas: 8 tablas de datos maestros del sistema principal
- Operaciones: Solo SELECT para obtener datos de referencia

VENTAJAS DE ESTA ARQUITECTURA:
‚úÖ Separaci√≥n clara de responsabilidades
‚úÖ Independencia operativa del sistema OSGO
‚úÖ Seguridad mejorada (solo lectura en sistema principal)
‚úÖ Escalabilidad y mantenimiento simplificado
‚úÖ Backup independiente de cada base de datos

================================================================================
2. BASE DE DATOS OSGO (ALMACENAMIENTO PRINCIPAL)
================================================================================

PROP√ìSITO: Almacenar todos los datos operativos del sistema OSGO
CONEXI√ìN: 'osgo' en config/database.php
ARCHIVO ORIGEN: osgo.sql

2.1 GESTI√ìN DE √ìRDENES DE SERVICIO
-----------------------------------

osgo_orden_servicio (TABLA MAESTRA PRINCIPAL)
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NRO_ORDEN - N√∫mero de orden (generado autom√°ticamente)
‚îú‚îÄ‚îÄ FECHA - Fecha de la orden
‚îú‚îÄ‚îÄ DISTRITO - Distrito donde se ejecuta
‚îú‚îÄ‚îÄ PROVINCIA - Provincia (IMBABURA, etc.)
‚îú‚îÄ‚îÄ CIUDAD - Ciudad (IBARRA, etc.)
‚îú‚îÄ‚îÄ DIA_SEMANA - D√≠a de la semana (MI√âRCOLES, JUEVES, etc.)
‚îú‚îÄ‚îÄ FECHA_COMPLETA - Fecha completa legible (2 DE ABRIL DE 2025)
‚îú‚îÄ‚îÄ TIPO_ORDEN - Tipo de orden (GENERAL, ESPECIAL)
‚îú‚îÄ‚îÄ OPERACIONES - Tipo de operaciones (P3, P4, etc.)
‚îú‚îÄ‚îÄ DISPOSICIONES_GENERALES - Disposiciones generales
‚îú‚îÄ‚îÄ REVISION - N√∫mero de revisi√≥n (00, 01, etc.)
‚îú‚îÄ‚îÄ FORMATO - Formato del documento ("11 julio 2022")
‚îú‚îÄ‚îÄ EJEMPLAR_NUMERO - N√∫mero de ejemplar
‚îú‚îÄ‚îÄ CREADO_POR - Usuario que cre√≥ la orden
‚îú‚îÄ‚îÄ ID_ESTADO_ORDEN (FK) - Estado actual
‚îú‚îÄ‚îÄ FECHA_ACTUAL - Timestamp de creaci√≥n
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_detalle_orden_servicio (TABLA DETALLE)
‚îú‚îÄ‚îÄ ID_DET_ORDEN_SERVICIO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO (FK) - Referencia a orden
‚îú‚îÄ‚îÄ ID_FUNCION (FK) - Funci√≥n asignada (REF: sistema_principal.funciones)
‚îú‚îÄ‚îÄ GRUPO_FUNCIONAL - Grupo al que pertenece
‚îú‚îÄ‚îÄ FUNCION - Nombre de la funci√≥n
‚îú‚îÄ‚îÄ CODIGO_RESPONSABLE - C√≥digo del responsable
‚îú‚îÄ‚îÄ RESPONSABLE - Nombre del responsable
‚îú‚îÄ‚îÄ SECTOR - Sector asignado
‚îú‚îÄ‚îÄ HORARIO - Horario de trabajo (06:00-14:00)
‚îú‚îÄ‚îÄ TIPO_SERVICIO - Tipo de servicio (MOTORIZADO, PEDESTRE, ADMINISTRATIVO)
‚îú‚îÄ‚îÄ PLACA_VEHICULO - Placa del veh√≠culo asignado
‚îú‚îÄ‚îÄ GRUPO_ASIGNADO - Grupo asignado (GRUPO_A, GRUPO_B, etc.)
‚îú‚îÄ‚îÄ CIRCUITO - Circuito asignado (CIRCUITO UNO, DOS, etc.)
‚îú‚îÄ‚îÄ DESCRIPCION_RUTA - Descripci√≥n detallada de la ruta
‚îú‚îÄ‚îÄ TIPO_VEHICULO - Tipo de veh√≠culo (PATRULLERO, GRUA, MOTORIZADO)
‚îú‚îÄ‚îÄ REQUIERE_ACOMPANANTE - Si requiere acompa√±ante (boolean)
‚îú‚îÄ‚îÄ ACOMPANANTE - Nombre del acompa√±ante
‚îú‚îÄ‚îÄ INSTRUCCIONES_ESPECIALES - Instrucciones especiales
‚îú‚îÄ‚îÄ NOVEDADES - Novedades del servicio
‚îú‚îÄ‚îÄ OBSERVACION - Observaciones adicionales
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_estado_orden (TABLA MAESTRA)
‚îú‚îÄ‚îÄ ID_ESTADO_ORDEN (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ESTADO_ORDEN - Nombre del estado
‚îú‚îÄ‚îÄ DESCRIPCION - Descripci√≥n del estado
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

ESTADOS DISPONIBLES:
- Pendiente: Orden reci√©n creada, pendiente de aprobaci√≥n
- Aprobada: Orden aprobada y lista para asignar recursos
- En Curso: Orden en proceso de ejecuci√≥n
- Finalizada: Orden concluida exitosamente
- Cancelada: Orden cancelada y no se realizar√°

2.2 CONTROL DE HORAS
--------------------

osgo_control_horas
‚îú‚îÄ‚îÄ ID_CONTROL_HORAS (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_PERSONA (FK) - Referencia a persona (REF: sistema_principal.personas)
‚îú‚îÄ‚îÄ FECHA - Fecha del control
‚îú‚îÄ‚îÄ HORAS_TRABAJADAS - Horas trabajadas (decimal 5,2)
‚îú‚îÄ‚îÄ ESTADO - Estado del control
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

ESTADOS DISPONIBLES:
- DISPONIBLE: Personal disponible para asignaci√≥n
- EN_SERVICIO: Personal actualmente en servicio
- HORAS_COMPLETADAS: Personal que complet√≥ sus horas

osgo_historial_horas
‚îú‚îÄ‚îÄ ID_HISTORIAL (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_CONTROL_HORAS (FK) - Referencia a control
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO (FK) - Orden que gener√≥ el cambio
‚îú‚îÄ‚îÄ HORAS_ANTERIORES - Horas antes del cambio
‚îú‚îÄ‚îÄ HORAS_NUEVAS - Horas despu√©s del cambio
‚îú‚îÄ‚îÄ MOTIVO - Motivo del cambio
‚îú‚îÄ‚îÄ CREATED_AT - Timestamp del cambio
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_control_horas_mensuales
‚îú‚îÄ‚îÄ ID_CONTROL_MENSUAL (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ CODIGO_AGENTE - C√≥digo del agente
‚îú‚îÄ‚îÄ NOMBRES - Nombres del agente
‚îú‚îÄ‚îÄ APELLIDOS - Apellidos del agente
‚îú‚îÄ‚îÄ ANIO - A√±o del control
‚îú‚îÄ‚îÄ MES - Mes del control
‚îú‚îÄ‚îÄ HORAS_TRABAJADAS - Horas trabajadas en el mes
‚îú‚îÄ‚îÄ HORAS_EXTRAS - Horas extras trabajadas
‚îú‚îÄ‚îÄ HORAS_FALTANTES - Horas faltantes
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

2.3 ANEXOS DE EVENTOS Y OPERACIONES
------------------------------------

osgo_anexo
‚îú‚îÄ‚îÄ ID_ANEXO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO (FK) - Orden asociada
‚îú‚îÄ‚îÄ TIPO_ANEXO - Tipo (EVENTO/OPERACION)
‚îú‚îÄ‚îÄ NOMBRE - Nombre del anexo
‚îú‚îÄ‚îÄ ORGANIZADOR - Organizador del evento
‚îú‚îÄ‚îÄ TELEFONO_ORGANIZADOR - Tel√©fono del organizador
‚îú‚îÄ‚îÄ FECHA - Fecha del evento
‚îú‚îÄ‚îÄ HORA_FORMACION - Hora de formaci√≥n
‚îú‚îÄ‚îÄ HORA_INICIO - Hora de inicio
‚îú‚îÄ‚îÄ HORA_FIN - Hora de finalizaci√≥n
‚îú‚îÄ‚îÄ LUGAR - Lugar del evento
‚îú‚îÄ‚îÄ MANDO - Mando responsable
‚îú‚îÄ‚îÄ JEFE_CONTROL - Jefe de control
‚îú‚îÄ‚îÄ MISION - Misi√≥n del evento
‚îú‚îÄ‚îÄ GESTION_REQUERIDA - Gesti√≥n requerida
‚îú‚îÄ‚îÄ RECORRIDO - Recorrido planificado
‚îú‚îÄ‚îÄ ANTECEDENTES - Antecedentes
‚îú‚îÄ‚îÄ INSTRUCCIONES_COORDINACION - Instrucciones
‚îú‚îÄ‚îÄ RUTAGRAMA_IMAGEN - Imagen del rutagrama
‚îú‚îÄ‚îÄ NOTAS_RUTAGRAMA - Notas del rutagrama
‚îú‚îÄ‚îÄ ESTADO - Estado del anexo
‚îú‚îÄ‚îÄ CREADO_POR - Usuario que cre√≥ el anexo
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

ESTADOS DISPONIBLES:
- PLANIFICADO: Anexo en fase de planificaci√≥n
- EN_CURSO: Anexo en ejecuci√≥n
- COMPLETADO: Anexo completado exitosamente
- CANCELADO: Anexo cancelado

osgo_anexo_detalle
‚îú‚îÄ‚îÄ ID_ANEXO_DETALLE (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_ANEXO (FK) - Referencia al anexo
‚îú‚îÄ‚îÄ ORDEN - Orden de presentaci√≥n
‚îú‚îÄ‚îÄ RESPONSABLE - Responsable asignado
‚îú‚îÄ‚îÄ FUNCION - Funci√≥n espec√≠fica
‚îú‚îÄ‚îÄ PUESTO_SERVICIO - Puesto de servicio
‚îú‚îÄ‚îÄ OBSERVACION - Observaciones
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_anexo_recurso
‚îú‚îÄ‚îÄ ID_ANEXO_RECURSO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_ANEXO (FK) - Referencia al anexo
‚îú‚îÄ‚îÄ ID_RECURSO (FK) - Recurso asignado
‚îú‚îÄ‚îÄ TIPO_RECURSO - Tipo de recurso
‚îú‚îÄ‚îÄ CANTIDAD - Cantidad asignada
‚îú‚îÄ‚îÄ OBSERVACIONES - Observaciones
‚îú‚îÄ‚îÄ created_at - Timestamp de creaci√≥n
‚îî‚îÄ‚îÄ updated_at - Timestamp de actualizaci√≥n

2.4 RECURSOS Y EQUIPOS
-----------------------

osgo_recursos
‚îú‚îÄ‚îÄ ID_RECURSO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRE_RECURSO - Nombre del recurso
‚îú‚îÄ‚îÄ TIPO_RECURSO - Tipo de recurso
‚îú‚îÄ‚îÄ PLACA - Placa del veh√≠culo
‚îú‚îÄ‚îÄ DESCRIPCION - Descripci√≥n detallada
‚îú‚îÄ‚îÄ DESCRIPCION_FUNCION - Descripci√≥n de la funci√≥n
‚îú‚îÄ‚îÄ UNIDAD_MEDIDA - Unidad de medida
‚îú‚îÄ‚îÄ GRUPO_ASIGNADO - Grupo asignado
‚îú‚îÄ‚îÄ HORARIO_DISPONIBILIDAD - Horario de disponibilidad
‚îú‚îÄ‚îÄ REQUIERE_CONDUCTOR - Si requiere conductor (boolean)
‚îú‚îÄ‚îÄ REQUIERE_ACOMPANANTE - Si requiere acompa√±ante (boolean)
‚îú‚îÄ‚îÄ ESTADO_OPERATIVO - Estado operativo (DISPONIBLE, EN_USO, etc.)
‚îú‚îÄ‚îÄ ACTIVO - Estado activo/inactivo
‚îú‚îÄ‚îÄ created_at - Timestamp de creaci√≥n
‚îî‚îÄ‚îÄ updated_at - Timestamp de actualizaci√≥n

TIPOS DE RECURSOS DISPONIBLES:
- PATRULLERO: Veh√≠culos patrulleros (T1 IMA1300, T2 IMA1506, T3 IMA1383)
- MOTOCICLETA: Motocicletas (GA611K, GA616K)
- PASOLA: Pasolas
- GRUA: Gr√∫as (IMA-1289)
- TANGO: Veh√≠culos tango
- CONO: Conos de seguridad
- VARILLA: Varillas reflectivas
- SENALETICA: Se√±al√©ticas de tr√°nsito
- CINTA: Cinta de seguridad
- BARRERA: Barreras de tr√°nsito
- RADIO: Equipos de radio comunicaci√≥n
- MEGAFONO: Meg√°fonos
- CHALECO: Chalecos reflectivos
- LINTERNA: Linternas
- EXTINTOR: Extintores

osgo_vehiculo
‚îú‚îÄ‚îÄ ID_VEHICULO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ PLACA - Placa del veh√≠culo
‚îú‚îÄ‚îÄ ACTIVO - Estado activo/inactivo
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_tipo_vehiculo
‚îú‚îÄ‚îÄ ID_TIPO_VEHICULO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ TIPO_VEHICULO - Tipo de veh√≠culo
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_servicio_grua
‚îú‚îÄ‚îÄ ID_SERVICIO_GRUA (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ PROPIETARIO - Propietario de la gr√∫a
‚îú‚îÄ‚îÄ CONTRATO - N√∫mero de contrato
‚îú‚îÄ‚îÄ TELEFONO - Tel√©fono de contacto
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

osgo_orden_servicio_grua
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO_GRUA (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_ORDEN_SERVICIO (FK) - Referencia a orden
‚îú‚îÄ‚îÄ ID_SERVICIO_GRUA (FK) - Referencia a servicio de gr√∫a
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

2.5 HORARIOS Y SECTORES
------------------------

osgo_horarios
‚îú‚îÄ‚îÄ ID_HORARIO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRE - Nombre del horario
‚îú‚îÄ‚îÄ HORA_INICIO - Hora de inicio (0-23)
‚îú‚îÄ‚îÄ HORA_FIN - Hora de fin (0-23)
‚îú‚îÄ‚îÄ descripcion - Descripci√≥n del horario
‚îú‚îÄ‚îÄ duracion_horas - Duraci√≥n en horas
‚îú‚îÄ‚îÄ ACTIVO - Estado activo/inactivo
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

HORARIOS DISPONIBLES:
- TURNO MA√ëANA: 06:00-14:00 (8 horas)
- TURNO TARDE: 14:00-22:00 (8 horas)
- TURNO NOCHE: 22:00-06:00 (8 horas)
- TURNO ESPECIAL: 12:00-20:00 (8 horas)
- TURNO ADMINISTRATIVO: 08:00-17:00 (9 horas)

osgo_sectores
‚îú‚îÄ‚îÄ ID_SECTOR (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ SECTOR - Nombre del sector
‚îú‚îÄ‚îÄ DISTRITO - Distrito
‚îú‚îÄ‚îÄ CANTON - Cant√≥n
‚îú‚îÄ‚îÄ ACTIVO - Estado activo/inactivo
‚îú‚îÄ‚îÄ created_at - Timestamp Laravel
‚îî‚îÄ‚îÄ updated_at - Timestamp Laravel

SECTORES DISPONIBLES:
- Ibarra Centro (Ibarra, Ibarra)
- Ibarra Norte (Ibarra, Ibarra)
- Ibarra Sur (Ibarra, Ibarra)
- Ibarra Este (Ibarra, Ibarra)
- Ibarra Oeste (Ibarra, Ibarra)
- Otavalo Centro (Otavalo, Otavalo)
- Otavalo Norte (Otavalo, Otavalo)
- Otavalo Sur (Otavalo, Otavalo)

2.6 USUARIOS Y AUTENTICACI√ìN
-----------------------------

osgo_users
‚îú‚îÄ‚îÄ ID_USUARIO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NAME - Nombre del usuario
‚îú‚îÄ‚îÄ EMAIL - Email del usuario
‚îú‚îÄ‚îÄ email_verified_at - Fecha de verificaci√≥n
‚îú‚îÄ‚îÄ password - Contrase√±a encriptada
‚îú‚îÄ‚îÄ ROL_ID (FK) - Referencia al rol del usuario
‚îú‚îÄ‚îÄ remember_token - Token de recordar sesi√≥n
‚îú‚îÄ‚îÄ created_at - Timestamp de creaci√≥n
‚îî‚îÄ‚îÄ updated_at - Timestamp de actualizaci√≥n

osgo_roles
‚îú‚îÄ‚îÄ ID (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRE - Nombre del rol
‚îú‚îÄ‚îÄ DESCRIPCION - Descripci√≥n del rol
‚îú‚îÄ‚îÄ PERMISOS - Permisos del rol (JSON)
‚îú‚îÄ‚îÄ ACTIVO - Estado activo/inactivo
‚îú‚îÄ‚îÄ CREATED_AT - Timestamp de creaci√≥n
‚îú‚îÄ‚îÄ UPDATED_AT - Timestamp de actualizaci√≥n
‚îî‚îÄ‚îÄ DELETED_AT - Timestamp de eliminaci√≥n (SoftDeletes)

ROLES DISPONIBLES:
- RESPONSABLE_OPERATIVO: Rol para responsables operativos
- JEFE_DISTRITO: Rol para jefes de distrito
- ADMIN: Rol de administrador del sistema

USUARIOS ACTUALES:
- Jeremy Flores (jerxav101@gmail.com) - RESPONSABLE_OPERATIVO
- Test User (test@example.com) - RESPONSABLE_OPERATIVO
- Esteban Aulestia (aulestiaesteban8@gmail.com) - RESPONSABLE_OPERATIVO

2.7 TABLAS DE SOPORTE LARAVEL
------------------------------

migrations - Control de migraciones de Laravel
sessions - Sesiones de usuarios
password_reset_tokens - Tokens de recuperaci√≥n de contrase√±a
failed_jobs - Jobs fallidos
jobs - Cola de trabajos
job_batches - Lotes de trabajos
cache - Cache de aplicaci√≥n
cache_locks - Bloqueos de cache

================================================================================
3. BASE DE DATOS SISTEMA_PRINCIPAL (CONSULTA DE DATOS)
================================================================================

PROP√ìSITO: Obtener datos de referencia del sistema principal (SOLO LECTURA)
CONEXI√ìN: 'sistema_principal' en config/database.php
ARCHIVO ORIGEN: sistema_principal.sql

3.1 PERSONAL Y FUNCIONES
-------------------------

personas (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_PERSONA (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRES - Nombres de la persona
‚îú‚îÄ‚îÄ APELLIDOS - Apellidos de la persona
‚îú‚îÄ‚îÄ CODIGO_AGENTE - C√≥digo √∫nico del agente
‚îî‚îÄ‚îÄ [Otros campos de informaci√≥n personal]

**USO EN OSGO**: Para obtener listados de personal disponible y asignar responsables a √≥rdenes de servicio.

funciones (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_FUNCION (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ FUNCION - Nombre de la funci√≥n
‚îî‚îÄ‚îÄ [Otros campos de la funci√≥n]

**USO EN OSGO**: Para parametrizar funciones disponibles en el sistema y asignar personal seg√∫n su funci√≥n.

3.2 GRUPOS Y TIPOS
------------------

grupo_operativo (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_GRUPO_OPERATIVO (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRE_GRUPO - Nombre del grupo
‚îî‚îÄ‚îÄ [Otros campos del grupo]

**USO EN OSGO**: Para obtener grupos operativos existentes y estructurar la organizaci√≥n.

tipo_grupo (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_TIPO_GRUPO (PK) - Identificador √∫nico
‚îî‚îÄ‚îÄ TIPO_GRUPO - Tipo de grupo

**USO EN OSGO**: Para clasificar tipos de grupos operativos.

3.3 INDISPONIBILIDADES
-----------------------

indisponibilidad (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_INDISPONIBILIDAD (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ ID_PERSONA (FK) - Referencia a persona
‚îú‚îÄ‚îÄ FECHA_INICIO - Fecha de inicio
‚îú‚îÄ‚îÄ FECHA_FIN - Fecha de fin
‚îî‚îÄ‚îÄ MOTIVO - Motivo de la indisponibilidad

**USO EN OSGO**: Para verificar disponibilidad de personal antes de asignaciones.

tipo_indisponibilidad (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_TIPO_INDISPONIBILIDAD (PK) - Identificador √∫nico
‚îî‚îÄ‚îÄ TIPO_INDISPONIBILIDAD - Tipo de indisponibilidad

**USO EN OSGO**: Para categorizar tipos de indisponibilidades del personal.

3.4 DISTRITOS Y SISTEMAS
-------------------------

distritos_agentes (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_DISTRITO_AGENTE (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ DISTRITO - Nombre del distrito
‚îî‚îÄ‚îÄ [Otros campos del distrito]

**USO EN OSGO**: Para obtener informaci√≥n de distritos y estructuras organizacionales.

sistemas (TABLA DE REFERENCIA)
‚îú‚îÄ‚îÄ ID_SISTEMA (PK) - Identificador √∫nico
‚îú‚îÄ‚îÄ NOMBRE_SISTEMA - Nombre del sistema
‚îî‚îÄ‚îÄ [Otros campos del sistema]

**USO EN OSGO**: Para integraci√≥n con otros sistemas de la organizaci√≥n.

================================================================================
4. RELACIONES ENTRE BASES DE DATOS
================================================================================

4.1 REFERENCIAS CRUZADAS (Cross-Database)
------------------------------------------

OSGO ‚Üí SISTEMA_PRINCIPAL (Solo consulta):
‚îú‚îÄ‚îÄ osgo.osgo_detalle_orden_servicio.ID_FUNCION ‚Üí sistema_principal.funciones.ID_FUNCION
‚îú‚îÄ‚îÄ osgo.osgo_control_horas.ID_PERSONA ‚Üí sistema_principal.personas.ID_PERSONA
‚îî‚îÄ‚îÄ [Otras referencias seg√∫n necesidades]

4.2 RELACIONES INTERNAS OSGO
-----------------------------

osgo_orden_servicio (MAESTRO)
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_detalle_orden_servicio
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_anexo
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_historial_horas
‚îî‚îÄ‚îÄ N:1 ‚Üí osgo_estado_orden

osgo_anexo
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_anexo_detalle
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_anexo_recurso
‚îî‚îÄ‚îÄ N:1 ‚Üí osgo_orden_servicio

osgo_control_horas
‚îú‚îÄ‚îÄ 1:N ‚Üí osgo_historial_horas
‚îî‚îÄ‚îÄ N:1 ‚Üí sistema_principal.personas (Cross-DB)

osgo_users
‚îî‚îÄ‚îÄ N:1 ‚Üí osgo_roles

4.3 INTEGRIDAD REFERENCIAL
---------------------------

INTERNAS (Mismo BD):
- osgo_orden_servicio.ID_ESTADO_ORDEN ‚Üí osgo_estado_orden.ID_ESTADO_ORDEN
- osgo_detalle_orden_servicio.ID_ORDEN_SERVICIO ‚Üí osgo_orden_servicio.ID_ORDEN_SERVICIO
- osgo_anexo.ID_ORDEN_SERVICIO ‚Üí osgo_orden_servicio.ID_ORDEN_SERVICIO
- osgo_users.ROL_ID ‚Üí osgo_roles.ID

EXTERNAS (Cross-Database) - Validaci√≥n por c√≥digo:
- osgo_detalle_orden_servicio.ID_FUNCION ‚Üí sistema_principal.funciones.ID_FUNCION
- osgo_control_horas.ID_PERSONA ‚Üí sistema_principal.personas.ID_PERSONA

================================================================================
5. CONFIGURACI√ìN DE CONEXIONES
================================================================================

5.1 CONFIGURACI√ìN EN config/database.php
-----------------------------------------

'connections' => [
    'osgo' => [
        'driver' => 'mysql',
        'host' => env('OSGO_DB_HOST', '127.0.0.1'),
        'port' => env('OSGO_DB_PORT', '3306'),
        'database' => env('OSGO_DB_DATABASE', 'osgo'),
        'username' => env('OSGO_DB_USERNAME', 'root'),
        'password' => env('OSGO_DB_PASSWORD', ''),
        'charset' => 'utf8mb4',
        'collation' => 'utf8mb4_unicode_ci',
        'prefix' => '',
        'strict' => true,
        'engine' => null,
    ],
    
    'sistema_principal' => [
        'driver' => 'mysql',
        'host' => env('SISTEMA_PRINCIPAL_DB_HOST', '127.0.0.1'),
        'port' => env('SISTEMA_PRINCIPAL_DB_PORT', '3306'),
        'database' => env('SISTEMA_PRINCIPAL_DB_DATABASE', 'sistema_principal'),
        'username' => env('SISTEMA_PRINCIPAL_DB_USERNAME', 'root'),
        'password' => env('SISTEMA_PRINCIPAL_DB_PASSWORD', ''),
        'charset' => 'utf8mb4',
        'collation' => 'utf8mb4_unicode_ci',
        'prefix' => '',
        'strict' => true,
        'engine' => null,
    ],
]

5.2 CONFIGURACI√ìN EN .env
-------------------------

# Base de datos OSGO (Principal - Read/Write)
DB_CONNECTION=osgo
OSGO_DB_HOST=127.0.0.1
OSGO_DB_PORT=3306
OSGO_DB_DATABASE=osgo
OSGO_DB_USERNAME=root
OSGO_DB_PASSWORD=

# Base de datos Sistema Principal (Consulta - Solo Read)
SISTEMA_PRINCIPAL_DB_HOST=127.0.0.1
SISTEMA_PRINCIPAL_DB_PORT=3306
SISTEMA_PRINCIPAL_DB_DATABASE=sistema_principal
SISTEMA_PRINCIPAL_DB_USERNAME=root
SISTEMA_PRINCIPAL_DB_PASSWORD=

================================================================================
6. USO EN MODELOS ELOQUENT
================================================================================

6.1 MODELOS OSGO (Base de datos osgo)
--------------------------------------

// Modelo para tabla osgo_orden_servicio
class OrdenServicio extends Model
{
    protected $connection = 'osgo';
    protected $table = 'osgo_orden_servicio';
    protected $primaryKey = 'ID_ORDEN_SERVICIO';
}

// Modelo para tabla osgo_users
class User extends Authenticatable
{
    protected $connection = 'osgo';
    protected $table = 'osgo_users';
    protected $primaryKey = 'ID_USUARIO';
}

6.2 MODELOS SISTEMA_PRINCIPAL (Base de datos sistema_principal)
---------------------------------------------------------------

// Modelo para tabla personas (solo lectura)
class Persona extends Model
{
    protected $connection = 'sistema_principal';
    protected $table = 'personas';
    protected $primaryKey = 'ID_PERSONA';
    
    // Solo operaciones de lectura
    public $timestamps = false;
}

// Modelo para tabla funciones (solo lectura)
class Funcione extends Model
{
    protected $connection = 'sistema_principal';
    protected $table = 'funciones';
    protected $primaryKey = 'ID_FUNCION';
    
    // Solo operaciones de lectura
    public $timestamps = false;
}

6.3 RELACIONES CROSS-DATABASE
------------------------------

class DetalleOrdenServicio extends Model
{
    protected $connection = 'osgo';
    
    // Relaci√≥n con modelo de otra BD
    public function persona()
    {
        return $this->belongsTo(Persona::class, 'CODIGO_RESPONSABLE', 'CODIGO_AGENTE');
    }
    
    public function funcion()
    {
        return $this->belongsTo(Funcione::class, 'ID_FUNCION', 'ID_FUNCION');
    }
}

================================================================================
7. ESTRATEGIAS DE CONSULTA
================================================================================

7.1 CONSULTAS LOCALES (OSGO)
-----------------------------

// Consultas normales en BD osgo
$ordenes = OrdenServicio::with('detalles', 'estado')->get();
$usuarios = User::where('ROL_ID', 1)->get();

7.2 CONSULTAS CROSS-DATABASE
-----------------------------

// Obtener datos de sistema principal
$personas = Persona::where('ACTIVO', 1)->get();
$funciones = Funcione::all();

// Combinar datos de ambas BD
$orden = OrdenServicio::find(1);
$detalles = $orden->detalles;
foreach ($detalles as $detalle) {
    $persona = Persona::find($detalle->ID_PERSONA);
    $funcion = Funcione::find($detalle->ID_FUNCION);
}

7.3 CACHE PARA OPTIMIZACI√ìN
----------------------------

// Cache de datos de referencia
$funciones = cache()->remember('funciones_sistema_principal', 3600, function() {
    return Funcione::all()->pluck('FUNCION', 'ID_FUNCION');
});

$personas = cache()->remember('personas_sistema_principal', 1800, function() {
    return Persona::where('ACTIVO', 1)->get();
});

================================================================================
8. MIGRACI√ìN Y SEEDERS
================================================================================

8.1 MIGRACI√ìN OSGO
------------------

- Solo migrar tablas osgo_* en base de datos osgo
- NO migrar tablas del sistema principal
- Usar connection 'osgo' en migraciones

php artisan migrate --database=osgo

8.2 SEEDERS
-----------

// Seeder para BD osgo
class OsgoSeeder extends Seeder
{
    public function run()
    {
        DB::connection('osgo')->table('osgo_estado_orden')->insert([...]);
    }
}

// NO crear seeders para sistema_principal (solo lectura)

================================================================================
9. BACKUP Y MANTENIMIENTO
================================================================================

9.1 ESTRATEGIA DE BACKUP
------------------------

BD OSGO (Cr√≠tica - Backup diario):
- Backup completo diario
- Backup incremental cada 4 horas
- Retenci√≥n: 30 d√≠as

BD SISTEMA_PRINCIPAL (Referencia - Backup semanal):
- Backup semanal completo
- Solo si hay cambios en datos maestros
- Retenci√≥n: 90 d√≠as

9.2 MONITOREO
-------------

BD OSGO:
- Monitoreo de espacio y rendimiento
- Alertas de consultas lentas
- Control de integridad referencial

BD SISTEMA_PRINCIPAL:
- Monitoreo de disponibilidad
- Verificaci√≥n de conexi√≥n
- Alerta si la conexi√≥n falla

================================================================================
10. SEGURIDAD
================================================================================

10.1 PERMISOS DE BASE DE DATOS
------------------------------

BD OSGO:
- Usuario osgo: SELECT, INSERT, UPDATE, DELETE
- Permisos completos en tablas osgo_*
- Control de acceso por rol de usuario

BD SISTEMA_PRINCIPAL:
- Usuario osgo: SOLO SELECT
- Sin permisos de escritura
- Acceso de solo lectura garantizado

10.2 VALIDACIONES
-----------------

- Validar integridad referencial en c√≥digo
- Verificar existencia de registros en sistema_principal
- Manejo de errores de conexi√≥n entre BD
- Logs de acceso cross-database

================================================================================
11. VENTAJAS DE LA ARQUITECTURA DUAL
================================================================================

‚úÖ **SEPARACI√ìN DE RESPONSABILIDADES**
- Datos operativos en osgo
- Datos de referencia en sistema_principal

‚úÖ **SEGURIDAD MEJORADA**
- Solo lectura en sistema principal
- Datos operativos protegidos

‚úÖ **ESCALABILIDAD**
- Cada BD puede optimizarse independientemente
- Mejor distribuci√≥n de carga

‚úÖ **MANTENIMIENTO**
- Backup independiente
- Actualizaciones separadas
- Menor impacto en cambios

‚úÖ **INTEGRIDAD**
- Sistema principal intacto
- Datos OSGO auto-contenidos

================================================================================
12. CONSIDERACIONES OPERATIVAS
================================================================================

12.1 SINCRONIZACI√ìN
-------------------

- Los datos del sistema principal son maestros
- OSGO mantiene referencias, no duplica datos
- Validar integridad en tiempo real

12.2 DISPONIBILIDAD
-------------------

- OSGO debe funcionar aunque sistema_principal no est√© disponible
- Cache de datos cr√≠ticos de referencia
- Manejo graceful de errores de conexi√≥n

12.3 RENDIMIENTO
----------------

- Cache inteligente de datos de referencia
- Consultas optimizadas cross-database
- √çndices apropiados en ambas BD

================================================================================
FIN DE LA DOCUMENTACI√ìN - ARQUITECTURA DUAL
================================================================================

Esta documentaci√≥n refleja la nueva arquitectura dual del sistema OSGO,
separando claramente las responsabilidades de almacenamiento y consulta
entre dos bases de datos independientes pero interconectadas.